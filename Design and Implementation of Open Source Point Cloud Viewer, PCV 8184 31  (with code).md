>  GitHub地址：point-cloud-viewer GitCode地址：point-cloud-viewer 

 The author started to design and implement this point cloud processing and 3D reconstruction software Point Cloud Viewer, PCV at the end of 2021. It took three months to complete most of the functions of the software. Since the author switched to embedded bottom-level related work and stopped researching point cloud processing related technologies, the subsequent function implementation of PCV has been stranded. When writing this software, there was a lack of relevant information for technical selection. In order to avoid detours for students who are interested in point cloud processing software development, this software is now open-sourced. Students can refer to the framework of this software to design and implement their own point cloud processing software. PCV is a software based on integrated point cloud display and point cloud processing. The point cloud processing function mainly includes the following functions: 

 The software is implemented by Qt design, its interface design refers to Cloud Compare, and the kernel algorithm is implemented based on the point cloud processing tool library PCL. See below for specific design and implementation details. 

 ![avatar]( 8dee241aeb674563adc018e42fda9c41.png) 

 Here are some demos:  

 ![avatar]( a33d787ca71c462894cc3824d4e37985.gif) 

 ![avatar]( 5fd5e4aa361346f5922796d2b11520df.gif) 

#  Use tutorials and related tool libraries 

 The following table is the technical solution adopted by this software. If you want to run through this project, it is recommended to refer to the following table: 

##  Step 1 Build the environment 

##  Step 2 Build the project with Cmake 

 This project uses Cmake to build the project: 

 ![avatar]( bb7658982d094ee3a0c0ebb303371ec5.png) 

 The most important of these is the writing of CMakeLists.txt: 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573782929
  ```  
 Specific usage methods: 

 ![avatar]( eef256f5c15847adb6c8ce7a55305b21.png) 

##  Step3 Use VS to write code and compile execution 

 ![avatar]( d99787a7b822495a994f4362dcf7ec77.png) 

 After the build is completed, there is a PointCloudViewer.sln file in the output folder, which can be opened using VS   

 If there is a problem that the program cannot be started, please refer to the blog post: 

 The solution to the problem that the project compiled and generated by using CMake + Visual Studio cannot start the program 

 Set PointCloudViewer as the startup project: 

 ![avatar]( dc4025a7225f4061aed22080bbe67b6a.png) 

#  Design and Implementation of Point Cloud Processing and 3D Reconstruction Software 

 This chapter will focus on the overall design, function development and running test of Point Cloud Veiwer (PCV). 

#  First, the overall design of the software 

 Before designing the point cloud processing and 3D reconstruction software in this paper, two general software design guidelines need to be followed: 

##  1.1 Software design process 

 Figure 1 shows the design flow chart of the point cloud processing and 3D reconstruction software in this paper. The design and implementation of a mature and reliable software first requires complete and clear design ideas and compliance with standardized software system design principles. 

 ![avatar]( 9516cf881c15454da4e2aa621645f435.png) 

 Fig. 1 Design flow of point cloud processing and 3D reconstruction software 

 From Figure 1, it can be seen that the design process of this software mainly involves six major steps: 

###  demand analysis 

 Before the software is designed and implemented, it is necessary to analyze the user request, that is, to clarify what functions the current software needs to achieve and the final effect to be achieved, in order to solve the problems currently encountered by the user. As shown in Table 1, the requirements analysis table for the point cloud processing and 3D reconstruction software designed and implemented in this chapter. 

 Table 1 Function list of point cloud processing and 3D reconstruction software 

###  overall design 

 After the requirements analysis, design the overall architecture of the software and determine its various functional modules. The overall architecture of the software is shown in Figure 2. 

###  Technology selection 

 Developers choose the appropriate software and hardware environment for software development according to the current budget, development cycle and the developer's own knowledge reserve. This process is called technology selection. According to the actual situation, after studying and judging the current key technologies of point cloud 3D reconstruction, the technology selection list for point cloud processing and 3D reconstruction software development is shown in Table 2. 

 Table 2 Selection of point cloud processing and 3D reconstruction software technologies 

###  detailed design 

 After the overall design and technical selection of the software, the technical direction and functional modules of the software have been preliminarily determined. The next step is to carry out specific design of each functional module. For example, the design or selection of algorithms in the module, the design of the operation interface and so on. 

###  Function implementation 

 After the detailed design of the software, the specific functions of the software are developed and realized, mainly including the development of the software interface and the implementation of the algorithm code related to the key technology of 3D reconstruction. 

###  Run the test 

 After the software development is completed, it is necessary to test the software by using some point cloud data with large data volume and complex surface characteristics as input to test the extreme performance of the software. 

##  1.2 Software Composition Structure 

 Figure 2 shows the overall architecture diagram of the point cloud processing and 3D reconstruction software designed in this paper. It can be seen from the figure that the software in this paper can be mainly divided into three functional modules: point cloud IO module, point cloud processing module and 3D visualization module. 

 ![avatar]( a79ec1071b3b4993bfdb3502ca89bcf3.png) 

 Figure 2 Point cloud processing and 3D reconstruction software architecture diagram 

 The following is a brief description of these three main functional modules: 

###  Point Cloud IO Module 

 The point cloud IO (Input/Output) module is mainly responsible for reading, converting and saving point cloud data. It is worth mentioning that this software has two point cloud reading methods: one is to establish communication with the lidar, read the point cloud data scanned by the lidar in real time, and save it locally. The currently supported lidar brands are Velodyne and Radium God. The second is to directly read the existing point cloud data files. The file formats currently supported by this software are: PCD, PLY, STL, PCAP, TXT and OBJ and other 6 formats, and support the mutual conversion of these formats. 

###  Point cloud processing module 

 The point cloud processing module is the core functional module of this software. It has five main functions: point cloud preprocessing, point cloud registration, surface reconstruction, point cloud segmentation and point cloud attribute extraction. Among them, point cloud preprocessing, point cloud registration and surface reconstruction are the key technologies of 3D reconstruction based on lidar, which is the focus of this paper. It not only integrates various improved algorithms proposed in this paper, but also integrates a large number of classic point cloud processing algorithms at home and abroad. The selection of the algorithm has a high degree of freedom, which is convenient for users to choose the appropriate algorithm for 3D reconstruction according to the actual situation of the target point cloud to be reconstructed. In addition, point cloud segmentation and point cloud attribute extraction are developed to expand on the basis of 3D reconstruction technology, and the functions are used to assist users in solving various problems encountered in 3D reconstruction, such as segmentation and extraction of target point clouds, obtaining specific geometric properties of point clouds, etc. 

###  3D visualization module 

 The 3D visualization module mainly includes functions such as visual interface, visual display and visual operation. The visual interface consists of five parts: main window, point cloud attribute window, point cloud processing console window, toolbar, menu bar, etc. Its interface design is friendly and easy to use. The visual display and operation functions of the point cloud use the QVTKWidget plug-in to visualize the results produced in the 3D reconstruction process in real time, and can be rotated, scaled, panned and changed at will, so that users can observe the point cloud model in more detail. 

##  1.3 Software Workflow 

 The three main functional modules based on point cloud processing and 3D reconstruction software are depicted in Figure 3. 

 ![avatar]( d7cc76f0f4584cf087d344fe1ea42bf8.png) 

 Figure 3 Point cloud processing and 3D reconstruction software workflow chart 

 As can be seen from Figure 3, the main workflow of the software in this chapter consists of the following steps: 

#  Second, the software development platform and function introduction 

##  2.1 Software development platform 

###  Integrated development environment 

 The point cloud processing and 3D reconstruction software designed in this paper is mainly based on two integrated development environments, Microsoft Visual Studio 2017 and Qt Creator, to complete the code writing, analysis, compilation and debugging. In addition, this paper is mainly based on the Qt framework to complete the design of the software interface and the implementation of internal logic functions. Qt has a set of codes and runs on multiple platforms. Therefore, the software developed using this framework can not only run on operating systems such as Windows and Linux, but also on MacOS. It is precisely because of the cross-platform development characteristics of Qt that the software designed in this chapter can run normally in multiple operating systems. Not only that, Qt can also be developed in combination with PCL. By using the QVTKWidget plug-in, point cloud processing software with GUI can be developed. The integrated development environment used by Qt is Qt Creator. This chapter mainly uses this IDE to complete the design of the software UI. 

###  PCL Point Cloud Data Processing Library 

 Point Cloud Library (PCL) is referred to as PCL. It also has the characteristics of cross-platform development. It adopts the BSD open-source protocol, which not only allows developers to conduct secondary development on the basis of the PCL tool library, but also encourages domestic and foreign scholars to share their own point cloud data-related research results in the form of code. Therefore, PCL largely integrates general algorithms for point cloud data acquisition and processing at home and abroad, as well as efficient point cloud-related data structures. Commonly used algorithm modules are: surface reconstruction module, point cloud filtering module, and point cloud registration module. Commonly used point cloud-related data structures include OC-TREE and KD-TREE. Most of the algorithm implementations in this paper are based on the PCL tool library, and the algorithm source code provided by it is improved and optimized. In addition, the visualization class used in this paper is pcl < unk > PCLVisualizer, and by recompiling the source code of the Visualization Toolkit (VTK), a QVTKWidget plug-in corresponding to the PCL version is generated, which is loaded in the Qt-based visualization software to display the point cloud processing results. 

###  Compile configuration tool CMake 

 CMake is an advanced compilation (installation) configuration tool. It also supports cross-platform features, so it can output the corresponding Makefile file or Project file according to the currently selected platform (such as VS2017) and compiler (such as MSVC or MinGW, etc.). CMake is relatively simple to use. You only need to write configuration environment variables and library-dependent command statements in its configuration file (a CMake script dedicated to building projects). The CMake configuration file is named after CMakeLists.txt. The PCL, VTK, and Qt used in this article all use the CMake tool to configure the compilation environment. 

 ![avatar]( 9dc3b189701540bb868ceb3d8397463a.png) 

 Figure 4 PCL function module 

##  2.2 Software main interface design 

 Figure 5 shows the loading page when the software is started. The layout of the main interface of the software is shown in Figure 6, which refers to the foreign open-source point cloud processing software Cloud Compare. In addition, the internal logic functions of the software and the specific implementation of various algorithms are independently designed and developed by this paper. It can be seen from Figure 7 that the software has six functional areas, namely: menu bar, point cloud processing toolbar, point cloud view operation toolbar, point cloud attribute window, point cloud display main window and operation record window. 

 ![avatar]( 01243d57dfc443938089c67e1ad67193.png) 

 ![avatar]( b28db9b225784c498c0eba27dde70a74.png) 

 ![avatar]( 46dc572b3199413caf5720d99299d99a.png) 

  File menu shortcut menu 

 Figure 7 Detailed explanation of the main interface of the software 

###  Menu Bar 

 There are 13 menus in the menu bar of this software. As shown in Figure 8, in addition to the point cloud processing related function menu, there are file menu bar and shortcut menu bar in the menu bar to improve the efficiency of software use. Figure 9 is a schematic diagram of the menu related to point cloud file processing in the software. It not only supports the import and export of point clouds in various formats, but also supports the export of point cloud processing logs. Figure 9 is the shortcut menu in the software. Users can either click on the menu item or press shortcut between them to run some functions of the software, such as screen snapshots, data point size settings, and point cloud view scaling. 

 ![avatar]( b30787a8ad0b463489f586d7a49aa8dc.png) 

 ![avatar]( 46fc9fd67432496fa8f63755cc622d2a.png) 

 ![avatar]( a43a3b0b76564e04aefe386c63afa5ec.png) 

 Figure 9 File menu and shortcut menu 

###  Toolbar 

 Users can either click on the corresponding menu items in the menu bar to run specific functions, or they can quickly operate by clicking on the icon buttons in the toolbar. There are two software toolbars. Figure 10 shows the visual operation toolbar, and Table 3 shows the functional interpretation of the button icons in the toolbar. By clicking the buttons, you can quickly operate the point cloud view, such as six views to quickly view the target point cloud, point cloud rotation fixed angle, and point cloud scaling. Figure 11 shows the software algorithm toolbar, and Table 4 shows the functional interpretation of each button icon in the algorithm toolbar. The algorithm toolbar covers the operation functions related to point cloud processing, such as copy and paste of point clouds, point cloud export, and shortcuts related to point cloud 3D reconstruction. 

 ![avatar]( 3edff6f48b3a422e8957eb3476632657.png) 

 ![avatar]( e42d8e84057c427fafca5b1c5d6b72b3.png) 

 ![avatar]( 5627c8b556084a6a8e571596eb764dac.png) 

 ![avatar]( 8cc133f3ca9e44f285b794abde8be95e.png) 

 Table 3 Software visual operation toolbar icon function detailed explanation   

###  Point Cloud Properties Window and Main Window 

 The right side of Figure 12 is the main point cloud window, which is used to display the currently loaded point cloud file. Not only can you use the mouse to drag, zoom, and rotate the target point cloud, but you can also add tools such as axes and rulers to the window to facilitate the visualization of the target point cloud. The left side of Figure 12 is the main point cloud attribute window. Through this window, you can know the specific attributes of the currently loaded and selected point cloud file of the software, such as file format, file name, number of point clouds, data format, and included fields. 

 ![avatar]( d913e2b8c92f4b08a4e773363995174b.png) 

 Figure 12 Point cloud attribute window and main window 

###  Point cloud processing record window 

 Since there are many related steps in point cloud processing, in order to make the steps in the point cloud processing process clearer and clearer for users, this software specially sets up a point cloud processing record window for recording the specific details of the current point cloud operation. As shown in Figure 13, each record is mainly composed of three parts: operation time, operation result and activity details. Not only that, point cloud processing records also support one-click export, which is convenient for users to record and analyze each process in point cloud processing. 

 ![avatar]( 795072686c1149f095bf2740b3db7e37.png) 

 Figure 13 Software point cloud processing record window 

###  Software related data structures 

 The point cloud processing and 3D reconstruction software designed in this paper not only supports direct reading of point cloud data for processing, but also can read the point cloud data scanned by the lidar in real time and save it locally. Taking the Velodyne lidar as an example, after the host computer and the lidar establish network communication, the software in this paper will continuously read the UDP packets sent by the Velodyne lidar, parse the UDP packets, and save the original point cloud data locally in the form of a PCAP file. The file structure of PCAP is shown in Figure 14. The PCAP file saves the point cloud data stream. In other words, a PCAP file contains multiple frames of point cloud images, and each frame of point cloud image data has its own data header (Packet Header) and timestamp (Timestamp). In the actual point cloud processing process, there is no need for multiple frames of repeated point cloud images. Therefore, only one of the point cloud images needs to be extracted from the PCAP file and the redundant information is removed to obtain the key frame point cloud image describing the target object. There are many storage methods for single-frame point cloud images according to their uses and processing methods, such as PCD, PLY and STL formats. 

 ![avatar]( 43e40c967bbe4eb38c3e53b59b7d4d4a.png) 

 Figure 14 PCAP file structure 

 Since the software in this paper is designed and developed based on the PCL tool library, and PCL not only has the highest compatibility with the PCD format, but also has a faster reading and writing speed for PCD files than other formats, the software also chooses the PCD format as the primary format for reading and writing point cloud data. In the header of the PCD file (the first 10 lines), various attributes of the current point cloud data must be declared first. Attributes contain 10 fields, each field occupies one line. Table 5 shows the meaning of each field of the PCD. From the FIELDS field, you can know the information contained in each data point of the current point cloud. As can be seen from Table 5, for example, it means that each data point contains coordinate information. If so, it means that each data point contains each point cloud color attribute (RGB) in addition to coordinate information. In addition, the POINTS, WIDTH and HEIGTH fields have a relationship. If the current point cloud is an unordered point cloud, the value of HEIGTH is 1, and WIDTH can also represent the number of points in the current point cloud. The content after the DATA field is the data part of the point cloud. In the .7 version of PCD, formats and formats are supported. It is important to note that the various fields in the PCD file have strict order requirements and cannot be missing, and must be described in the order shown in Table 5. 

 Table 5 PCD file field meaning 

#  Third, software point cloud processing related functions 

 The point cloud processing module is mentioned in the software composition structure in Figure 2 above. The point cloud processing module includes five functions: point cloud preprocessing, point cloud registration, point cloud surface reconstruction, point cloud segmentation and point cloud attribute extraction. In addition to point cloud preprocessing, point cloud registration and surface reconstruction and other 3D reconstruction related functions, the software in this paper also expands the functions of point cloud segmentation and point cloud attribute extraction based on this. Point cloud processing related functions are the core functions of this software, including 78 excellent point cloud processing related algorithms at home and abroad, including the improved algorithms in this paper, and as many as 156 related function functions. And each point cloud processing algorithm can independently set the input parameters, and different algorithms can be freely used together. Each function is described in detail below. 

##  3.1 Point cloud preprocessing function 

 The point cloud preprocessing function mainly includes three parts: point cloud sampling, point cloud outlier removal, point cloud filtering, etc. The software in this paper integrates five algorithms including downsampling, uniform sampling and upsampling based on voxel grid in the point cloud sampling function. As shown in Figure 15 (a), there are also functions such as KD-TREE, OC-TREE and normal estimation. For outlier removal function, as shown in Figure 15 (b), the software in this paper integrates DBSCAN outlier removal algorithms based on statistics, density, and clustering. In addition, the point cloud filtering function of this software integrates 9 point cloud filtering methods including Gaussian filtering, average filtering and Laplacian filtering. Users can choose the appropriate filtering method according to the actual situation of the current point cloud. In addition, there are functions such as "one-click removal" and "one-click filtering" in the menu, which can quickly process the point cloud using pre-set algorithms and algorithm parameters. 

 ![avatar]( 4f5d49497fc94fb09a05b810c3cc87b8.png) 

 ![avatar]( 93db69dae5064dc7a43b679ced344d4f.png) 

 ![avatar]( d711403385964d4b84de10027331ba49.png) 

 Figure 15 Point cloud preprocessing related function menu 

##  3.2 Point cloud registration function 

 Point cloud registration related functions include key point extraction algorithm and point cloud registration algorithm. As shown in Figure 16 (a), it is the key point extraction related function menu. The software in this paper integrates 8 key point extraction algorithms including Agast key point, Harris key point, ISS key point and SIFT key point. And Figure 16 (b) is the function menu related to point cloud registration. It can be seen from the figure that the software in this paper integrates 9 registration algorithms including ICP, NDT, Super 4PCS and the improved Super 4PCS algorithm based on ISS key points in this paper. In addition, for key point extraction and registration, the software in this paper also sets shortcut functions such as "one-click extraction" and "one-click registration". 

 ![avatar]( da6b46dfb21e457aa5f60c847cb616b9.png) 

 ![avatar]( b2cce6cb035d44d2a9bcf7f18fbc2fe4.png) 

 Figure 16 Point cloud registration related function menu 

##  3.3 Point cloud surface reconstruction function 

 Figure 17 shows the function menu related to point cloud surface reconstruction of this software. This software supports 8 surface reconstruction algorithms including MLS, Poisson algorithm, greedy projection triangulation algorithm and improved greedy projection triangulation algorithm proposed in this paper, and also supports the shortcut function of "one-click reconstruction". In addition, this software can also export the reconstructed 3D model to files in OBJ, STL and PLY formats, which can be widely used in other application scenarios such as 3D printing. 

##  3.4 Point cloud segmentation function 

 The point cloud segmentation function of this software integrates 10 point cloud segmentation algorithms including plane segmentation, cylinder segmentation, European distance segmentation and color-based segmentation. The point cloud segmentation function menu of the software is shown in Figure 18. The purpose of point cloud segmentation is to extract the target point cloud required by the user from the point cloud data containing multiple targets. Users can use different segmentation algorithms for the target point cloud according to different properties of the point cloud. After the point cloud segmentation is completed, the different sub-point clouds obtained by the segmentation can be saved separately for the next processing. 

 ![avatar]( 5b046eb485cb45f78939c28411e989a2.png) 

 ![avatar]( 0e0c210442aa474989a94860f0707881.png) 

###  Point cloud attribute computing function 

 ![avatar]( e4fa5baf6df24967912e6a25c47f5f3b.png) 

 ![avatar]( 7c9b11c902824ae39c734663fe577ab4.png) 

 ![avatar]( 35e495b6ec7949019e063e28d6bd9d15.png) 

 ![avatar]( a8066332729b4e31a9f45417f0d144c1.png) 

 The geometric attribute extraction function menu of this software is shown in Figure 19. The software can calculate the geometric attributes such as surface area, volume, circumcircle, centroid, density and covariance matrix of the target point cloud. These attributes can be freely selected for extraction calculation, or you can click the "One-click Extract" menu item in the menu to calculate all the attributes of the target point cloud. It is worth mentioning that the calculation functions of the surface area and volume in this software need to be reconstructed after the surface of the target point cloud can be calculated. Schematic diagram of AABB bounding box and schematic diagram of OBB bounding box 

 Figure 19 Point cloud attribute computing function menu 

 This function can not only calculate the surface area of the target point cloud, but also obtain the maximum unit area and minimum unit area of the reconstructed surface. In fact, the surface reconstructed by the surface is composed of several unit surfaces, such as the surface generated by the greedy projection triangulation surface reconstruction algorithm, which is composed of several unit triangular surfaces. In addition, the software in this paper can calculate the actual volume of the target point cloud, but also calculate the target point cloud axis-aligned bounding box (AABB) volume and directed bounding box (OBB) volume, AABB bounding box and OBB bounding box schematic diagram as shown in Figure 19 © and Figure 19 (d), the two volumes are obtained for the packaging and transportation of real target objects. [78] 

#  IV. Software operation and testing 

 This section will use the point cloud processing and 3D reconstruction software developed in this paper to perform point cloud processing preprocessing experiments, point cloud registration experiments, point cloud surface reconstruction experiments, point cloud segmentation experiments and point cloud attribute computing experiments on point cloud data of different scenes, in order to verify the validity and practicality of the software in this paper. Figure 20 is the selected two main experimental point cloud images, and Figure 20 (a) is the point cloud image of the table. The point cloud image has a large amount of data, with 460,400 data points. It can be seen from the image that the point cloud contains more outlier noise points, and the point cloud space is not closed, so it is difficult to perform 3D reconstruction of such point clouds. Figure 20 (b) shows a point cloud image of a Chinese dragon, which also has a large amount of data, with a total of 437,645 data points. Unlike Figure 20 (a), the spatial characteristics of the point cloud are closed, but the surface curvature of the point cloud is complex and varies greatly. There are many raised areas, and it is also difficult to perform three-dimensional reconstruction. 

 ![avatar]( 3039dc791e7b4e46af19a48c6a4e9925.png) 

 ![avatar]( 699a5a1da40f4de5bcce7d808087138c.png) 

 Figure 20 Experimental point cloud object 

##  4.1 Point cloud preprocessing function test 

 As shown in Figure 21 (a) and Figure 21 (b), it is the main interface for loading and displaying the two point cloud images using the software in this paper. Then click the software function button to perform preprocessing operations such as outlier removal (KANN-DBSCAN outlier removal algorithm accelerated by KD-TREE), filtering smoothing (Gaussian filtering), and downsampling (voxel-based downsampling) on the current point cloud image. Figures 21 © and 21 (d) are schematic diagrams of the work when the software processes point clouds. Figures 21 (e) and 21 (f) are the results after point cloud preprocessing. As can be seen from the figure, the software in this paper not only removes the outliers in the two point cloud images, but also greatly simplifies the point cloud scale of the point cloud data while retaining its surface characteristics. As can be seen from Table 6, the point cloud preprocessing time for the table point cloud is 1955 ms, and the point cloud reduction rate is 0.07. The processing time of China Dragon Point Cloud is 1373 ms, and its reduction rate is 0.055. Although the point cloud scale of the two point cloud images has been reduced from 100,000 to 10,000, the contour characteristics of the point cloud have not been affected. 

 ![avatar]( 2ffe1801359b4d42920122fd2a8b4306.png) 

 ![avatar]( 5f000e92990e4713b35e9766866702bd.png) 

 ![avatar]( 6ab166c3b2284e088cb4bd0fec1bb070.png) 

 ![avatar]( de48e887156c42ed855bd398ce4d0b6d.png) 

 ![avatar]( fd07c48c76ed4b98ab894b14d41c0e74.png) 

 ![avatar]( 080f73eff24c4b37ad31e5019ca98f85.png) 

 Table point cloud image loading completed: Table point cloud image preprocessing, table point cloud image preprocessing completed, China dragon point cloud image loading completed: China dragon point cloud image preprocessing: China dragon point cloud image preprocessing completed:  

 Figure 21 Schematic diagram of software point cloud preprocessing 

 Table 6: Experimental results of point cloud pretreatment 

##  4.2 Point cloud registration function test 

 After the original point cloud data is preprocessed by the point cloud, it can be used for point cloud registration experiments. First, two frames of point cloud data at different positions are read into the software, as shown in Figure 22. Figure 22 (a) shows two frames of point cloud images of the table point cloud in different poses. Figure 22 (b) shows two frames of point clouds of the Chinese dragon in different poses. By clicking the function button on the software, select the registration algorithm to perform the registration experiment. As shown in Figure 22 © and Figure 22 (d), it is a schematic diagram of the registration work being carried out by the software. The registration results are shown in Figure 22 (e) and Figure 22 (f). It can be seen that the two red and blue point clouds almost completely overlap. The higher the degree of overlap between the point clouds, the better the point cloud registration effect. In the point cloud properties window in the software, you can see the conversion matrix from the current source point cloud (red) to the target point cloud (blue): 

 ![avatar]( 1b54dd4e4f6448b69ac0288f903ac3a8.png) 

 Table 7 shows the result analysis table for point cloud registration. As mentioned above, the smaller the FitnessScore, the closer the distance between the two frames of point clouds, and the higher the degree of coincidence. If the FitnessScore is 0, it means that the two frames of point clouds are completely coincident. It can be seen from the table that after 11 iterative registration times, the registration score of the table point cloud is 1, while the registration score of the Chinese dragon after 15 iterations of registration is 1. The registration score of the two-point cloud is approximately 0, indicating that the registration effect is more accurate. 

 ![avatar]( 3b2dec162a4b4fc89bf72ae8bca34c3f.png) 

 Figure 22 Schematic diagram of point cloud registration experiment 

 Table 7 Point cloud registration experiment results 

##  4.3 Point cloud surface reconstruction function test 

 After the point cloud registration is successful, by clicking the function button in the software, the greedy projection triangulation surface reconstruction algorithm is selected to perform surface reconstruction on the two target point clouds respectively. Figures 23 (a) and 23 (b) are schematic diagrams of the surface reconstruction being carried out by the software in this paper. Figures 23 © and 23 (d) are the three-dimensional models after the software surface reconstruction. It can be seen that the reconstruction effect is better, not only no false surface generation, but also no surface voids. Figure 24 is a comparison diagram before and after the three-dimensional reconstruction of the point cloud. From the comparison diagram, it can be seen that even if the unclosed surface or the point cloud surface contains a lot of detail features, the improved surface reconstruction algorithm proposed in this paper can restore and rebuild the surface details of the point cloud well. 

 ![avatar]( cc85fd9296164c91ab4efede756ccf84.png) 

 Figure 23 Schematic diagram of software surface reconstruction experiment 

 ![avatar]( 9902206c3fd04331867c6d1c0c13c10f.png) 

 Figure 24 Comparison of point cloud surface reconstruction before and after 

##  4.4 Point cloud segmentation function test 

 The point cloud segmentation function of this software integrates 10 different types of point cloud segmentation algorithms, such as plane segmentation, cylinder segmentation, European distance segmentation and regional growth segmentation, etc. Different segmentation algorithms are suitable for different point cloud scenarios and segmentation requirements. Due to the limited space of this paper, this subsection only selects the point cloud plane segmentation function and cylinder segmentation function in the software for testing. 

 ![avatar]( 2ccc1142052a463e81bfe565498d3c9d.png) 

 Figure 25 Planar segmentation of the table point cloud 

 ![avatar]( 4812c3ea003241708110f82990766e38.png) 

 Figure 26 Schematic diagram of table point cloud plane segmentation result 

 ![avatar]( fce8076cf44a4dce83a13b292269b13a.png) 

 Figure 25 is a schematic diagram of the table point cloud being divided by the software in this paper. It can be seen from the figure that the software searches for two planes in the table point cloud image and marks them with red and green respectively. Let the red one be plane 1 and the green one be plane 2. Click the "OK" button to extract the searched point cloud plane and save it locally. As shown in Figure 26, it is the division result of the table point cloud, Figure 26 (a) is the effect diagram of the point cloud division, Figure 26 (b) and Figure 26 (d) are the plane 1 and plane 2 obtained by the plane division of the software from the table point cloud. The result after extracting the two planes is shown © Figure 26. It can be seen that both planes are completely extracted. Not only that, the equation of the plane in the three-dimensional space is shown in the formula (5.1) [79]:  

 According to this formula, the plane equations of plane 1 and plane 2 in the three-dimensional point cloud space can be fitted respectively. The parameters of the two plane equations are shown in Table 8: 

 Table 8 Table point cloud plane segmentation data results 

 In addition, the software in this paper can also perform multiple segmentation of point cloud data, that is, by using different point cloud segmentation algorithms to segment the point cloud in turn. Figure 27 (a) is a top view of another original point cloud data used for point cloud segmentation testing, and Figure 27 (b) is a side view. It can be seen from the two figures that the scene described by the point cloud image is: a water cup is placed on the table plane, and the water cup has a semi-circular water cup handle. From the overall perspective, it can be found that the original point cloud contains a plane (table) and a cylinder (water cup). 

 ![avatar]( 664f43f9f9454dedbb51b03a98fb38d4.png) 

 Fig. 27 Planar segmentation and cylinder segmentation processing 

 The original point cloud is divided by plane and cylinder in sequence using the software in this paper. The plane segmentation result is shown in Figure 27 ©, and Figure 27 (d) is the cylinder segmentation result. As can be seen from the plane segmentation result, the software in this paper can completely extract the point cloud plane. From the segmentation result of the cylinder, the cylinder of the visible water cup is completely extracted, and the water cup is not extracted. In addition, the equation of the cylinder in the three-dimensional point cloud space is shown in the equation (5.2): 

 ![avatar]( 569dcd41bc1a4dd7aca8473036d32657.png) 

 Wherein, is any point on the axis C of the cylinder, is the direction vector of the axis C, and is the radius of the cylinder. According to this formula, the parameters of the cylinder equation can be obtained by fitting: 

 In addition, according to equation (5.1), the parameters of the plane equation can be obtained as follows: 

##  4.5 Point cloud attribute computing function test 

 The point cloud attribute calculation function of this software supports the calculation of six attributes including the surface area, volume, circumscribed circle, and point cloud centroid of the point cloud. This test will mainly calculate the two attributes of surface area and volume. 

 ![avatar]( 50203378fcca4da58d1d101fe14ca72f.png) 

 Figure 28 Chinese Dragon Point Cloud Attribute Computing 

 ![avatar]( e7820293bd8e4740ab19625438d1c85e.png) 

 Figure 29 Monkey point cloud attribute calculation 

 Figure 28 (a) is a schematic diagram of the software work for calculating the surface area and volume of the Chinese Dragon Point Cloud. Figure 28 (b) is the calculation result of the surface area and volume. It can be seen from the results that the surface area of the Chinese Dragon Point Cloud is 0.0725956 square meters, its volume is 0.00478281 cubic meters, and its AABB bounding box volume is 0.00271155 cubic meters, and the OBB bounding box volume is 0.00298459 cubic meters. Figure 29 (a) is a working diagram of the software's surface area and volume calculation of the monkey point cloud. It can be seen from the calculation result Figure 29 (b) that the surface area of the monkey point cloud is 10.7531 square meters, its volume is 2.45824 cubic meters, and its AABB bounding box volume is 8.14628 cubic meters, and the OBB bounding box volume is 8.11579 cubic meters. 

#  Fifth, summarize 

 The software in this paper has three functional modules: point cloud IO, point cloud processing and 3D visualization, among which there are 12 main functions in total. Then introduce the specific function development of the software in this paper, including the development platform of the software, the design of the main interface, the data structure related to the software and the related functions of point cloud processing. The related functions of point cloud processing are the core functions of this software, which cover 78 excellent point cloud processing related algorithms at home and abroad, including the improved algorithm in this paper, and there are as many as 156 related function functions. Not only that, each point cloud processing algorithm can set input parameters independently, and different algorithms can be freely used together, and users have a high degree of freedom in choosing the algorithm. Finally, different point cloud data are used to test the software's functions such as point cloud preprocessing, point cloud registration, point cloud surface reconstruction, point cloud segmentation, and point cloud attribute calculation. The software test results show that the software designed and developed in this chapter has high practicality. 

